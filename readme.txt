　★ deflister ★

【　名称　】deflister (definition listupper)
【Version 】1.12
【開発環境】Windows XP SP3 HomeEdition
【 更新日 】2008年 11月 24日(月)
【　種別　】フリー・ソフトウェア
【 開発者 】上大

＠目次
　・概要
　・インストール
　・アンインストール
　・パッケージ
　・使い方
　・著作権
　・謝辞
　・参照
　・更新履歴

＠概要
	HSP3スクリプトに含まれる定義を一覧にするソフトです。
	HSP3に同梱されているスクリプトエディタに、外部ツールとして登録する
	ことで、ラベル参照と同じ感覚で定義を参照することが可能になります。
	ラベルも拾うため、ラベル参照の上位互換となっています。
	
＠インストール
	解凍以外の手続きは不要です。レジストリは一切汚しません。
	
＠アンインストール
	展開されたファイルを、フォルダごと削除するだけでかまいません。
	「＠パッケージ」を参照してください。
	
＠パッケージ
	[deflister]
	┣ deflister.exe　 : ソフト本体。
	┗ readme.txt　　　: このファイル。説明書。
	
＠使い方
　・外部ツールとして使う場合
	HSP3標準スクリプトエディタ(hsed3)の外部ツールとして登録する場合、
	コマンドラインを「hsed」とだけにしておいてください。
	コマンドラインがない場合は、通常実行と見なし、hsedを無視します。
	
	※hsp3.1 に同梱されているもの以外での動作は確認していません。
	
　・コマンドライン
	三通りあります。
	１. hsed
		hsed3 の外部ツールとして実行します。
	２. filename
		ファイル名を指定して開きます。
	３. なし
		対象スクリプトを、ダイアログで選択します。これが通常実行です。
	
　・使用上の注意
	ファイルの改行コードは CRLF、文字コードは SHIFT_JIS と信じて処理
	している部分が多々あります。それ以外のエンコードでは、正常に処理
	されない可能性が高いので、お気を付けください。
	この問題は、後々修正する予定です。
	
　・拾ってくれる定義
	プリプロセッサ命令とラベルです。ラベルは、次の場合に限定されます。
		行頭、「{}:」の次
	
	次のプリプロセッサ命令の次にある識別子を拾います。
		deffunc, defcfunc, modfunc, modcfunc, define, const, enum
	次の識別子を無視します。
		global, local, ctype
	
	※modcfuncは実際には無効ですが、将来性を考えて拾ってみました(？)
	
　・種類カラム
	定義されている識別子の種類です。命令、関数、マクロ、定数、ラベルの
	５パターンがあります。
	オプションとして、以下の文字列が付属している可能性があります。
	
		Ｃ　…… ctype  ( 関数形式のマクロ )
		Ｍ　…… module ( #modfunc や #modcfunc )
	
　・範囲カラム
	これは、定義される空間の名前になります。空間は、識別子の後ろに@を
	つけるか、#module 〜 #global の内部で定義することによって定まりま
	す。@に続く空間名が省略されている場合は、グローバル領域での定義と
	なります。
	以下の場合、範囲カラムには特別な文字列が入ります。正確( 正式 )な
	空間名ではありません。
	
		グローバル領域　…… global
		すべての領域　　…… *
		無名モジュール　…… m? [unique]
		local 指定　　　…… ... [local]
	
	すべての領域とは、#deffunc や、#define で global 指定をしたとき
	などです。すべての領域で永続的に使用できるため、範囲がありません。
	#deffunc などで local 指定をした場合、同じモジュール空間からも
	@... が必要になるので、[local] と表示し、他の命令と区別されます。
	
　・ファイルカラム
	定義収集対象のファイル名になります。hsed3で編集中のファイルは、
	[hsedtmp.hsp]というファイル名になります。( 一時ファイルです )
	
＠著作権
	作者の上大にあります。
	
＠謝辞
	とても簡単に、高度なプログラミングのできるHSPを開発してくださる
	おにたまさん他OpenHSPのコミッタの方々に、感謝いたします。
	
＠関連URL
	・サポートサイト
	　( 配布場所。意見、要望、バグ報告などはここの掲示板へ )
		http://prograpark.ninja-web.net/
	
	・HSP本家サイト
		http://hsp.tv/
	
＠更新履歴
2008 11/18(Tue)
	・初期バージョンが完成。公開。

2008 11/19(Wed)
	・リストボックスではなく、リストビューに変更。
	　「行番号、識別子、種類、範囲」を拾う。
	　カスタムドローを検討。
	・一行一行切り出す方式から、HPMで構文解析を行うように変更。
	　ラベルも拾うため。
	・↑により、行番号の取得方法を変更。いちいち関数を呼び出して
	　行番号を求めるように修整。
	・↑により、非常に低速化したので、indexもリストにするように修整。
	　まだましな速度に落ち着いた。
	・ランタイムを hsp3mt に変更。高速になる。( ファイルサイズは増加 )
	　テストでは、hsp3 の(3/2)倍速だった。
	・記号 @ を処理するように修整。
	・EnterキーやＷクリックでジャンプ出来るように修整。(LVN_ITEMACTIVATE)
	・バージョン 1.10 が完成、公開。
	
	・リストビューをカスタムドローにしてみた。
	　見やすくなった気はしない。

2008 11/20(Thu)
	・無名モジュール空間が (n)unique になるように修整。
	　以前は空だった。
	・#deffunc #modfunc #defcfunc #modcfunc を、デフォルトで
	　永続 global 指定にした。( @ や local がない場合 )
	・local はただの global 外しではないので、
	　範囲に[local] を付加するように修整。

2008 11/22(Sat)
	・Mutex によって二重起動を防止。
	　埋もれていても、二重起動することで最前面に戻せるようになった。
	・バージョン1.11をリリース。

2008 11/23(Sun)
	・実行してもカレントディレクトリを変更しないように修整。
	・common のパスを hsed3 のパスから計算するように変更。
	・定義をスクリプトではなくファイルから取り出すように変更。
	　→ hsed の場合、必ず一時ファイルを作成する。
	・TookDefinition 命令や deflist〜系の配列を、
	　モジュールクラスで扱うように修整。見やすくなった。
	・hsed のプロセスメモリを操作するようになったため、3.1版以外での
	　動作を保証できなくなった。
	・Ｄ＆Ｄの時、ClipCursor関数でマウスカーソルの移動範囲を制限
	　するように変更。これで、端っこでぴくぴくすることがなくなった。
	　→ onerror を受付、bDragging が真なら移動範囲を解放する。
	・無名モジュール空間を m? [unique] に変更。[local] に合わせてみた。
	・無条件でファイルカラムを追加。
	　前は、include先も対象にするときだけだった。→ 簡略化のため。
	・ファイルを読み込むときに、検索パスに追加するよう修整。
	　→ かなり遅くなる。なんとかなるのか。

2008 11/24(Mon)
	# 前日から引き続き……
	・バージョン1.12をリリース。

Copyright(C) 2008 Ue-dai.